{% extends "aria/base.html" %}
{% load static %}

{% block javascript %}
    <script src="{% static './aria/js/create/crop.js' %}" type="text/javascript"></script>
{% endblock %}

{% block content %}
    <div class="container">
        <div class="card m-5">
            <div class="card-body">
                <div class="container">
                    <form id="crop-form" method="POST">
                        <div class="row mb-3">
                            <div class="col">
                                {{ cropForm.name }}
                            </div>
                            <div class="col input-group">
                                {{ cropForm.species }}
                                <div class="input-group-append">
                                    <a role="button" class="btn btn-primary" href="{% url 'createSpecies' %}">Add New<New></New></a>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-6 pull-right">
                                {{ cropForm.company }}
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col">
                                {{ cropForm.description }}
                            </div>
                        </div>
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#planting-modal">
                            Add Planting Information<New></New>
                        </button>
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#care-modal">
                            Add Care Information<New></New>
                        </button>
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#harvest-modal">
                            Add Harvest Information<New></New>
                        </button>
                        <div class="row justify-content-end mb-3">
                            <button class="btn btn-primary" onclick="$('#crop-form').submit()">Submit</button>
                        </div>
                        <div class="modal fade" id="planting-modal">
                            <div class="modal-dialog modal-dialog-scrollable">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Planting Instructions</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div id="planting-form">
                                            {% for form in plantingFormSet %}
                                                {% include './plantinginformation.html' with form=form formNum=forloop.counter0 %}
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal fade" id="care-modal">
                            <div class="modal-dialog modal-dialog-scrollable">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Planting Instructions</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div id="care-form-1">
                                            <div class="input-group mb-3">
                                                {{ careFormSet.form.water }}
                                                <span class="input-group-text">Inches of water per week</span>
                                            </div>
                                            <div class="input-group mb-3">
                                                {{ careFormSet.form.sun }}
                                            </div>
                                            <div class="input-group mb-3">
                                                {{ careFormSet.form.soil }}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal fade" id="harvest-modal">
                            <div class="modal-dialog modal-dialog-scrollable">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Planting Instructions</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div id="harvest-form-1">
                                            <div class="input-group mb-3">
                                                <span class="input-group-text">Harvest</span>
                                                {{ harvestFormSet.form.variety }}
                                            </div>
                                            <div class="input-group mb-3">
                                                {{ harvestFormSet.form.begin }}
                                                <span class="input-group-text">to</span>
                                                {{ harvestFormSet.form.end }}
                                                <span class="input-group-text">weeks after planting/transplanting</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {{ plantingFormSet.management_form }}
                        {{ harvestFormSet.management_form }}
                        {% csrf_token %}
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

